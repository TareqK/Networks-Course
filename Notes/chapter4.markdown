# Chapter 4 : Network Layer

## Introduction

### Forwarding

Move packets from router input to appropriate router output.
This happens inside the router.

### Routing

Determine route taken by packets from source to dest.

---

## Virtual Circuits 

Virtual circuits are a path for which packets to take. They simulate 
circuit switching. They work by IDs. The connection  and path is established first,
then the packets are sent. These are contrasted with **datagram networks**, 
where the data can take multiple paths.

VCs are faster than normal datagram networks, but are much more expensive.


---

## IP Addressing 


### Longest Prefix Match

![LPM](data:image/png;base64,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)


Say we have 3 IP addresses : 192.168.0.22,192.168.0.33,192.168.1.44. In this case, the **Host Id** 
is 22,33,44. 192.168.0 is called the **Prefix Id**.

We check for the longest matching prefix id and send it from that link interface.

### Routing Architechture

![RA](http://i.imgur.com/kvNkoGY.png)

Routing processr performs routing, management.

High-Speed Switching fabric performs data handling.

We can either have memory fabricing ,bus fabricing, or crossbar fabricing.

- Memory : Slow but easier to implement.

- Bus : Faster but can only be held by 1 pair of interfaces

- Crossbars  : Fastest, but causes blocking.

### Buffering  and Head-of-Line Blocking

Look up.

### IP Datagram Format

![ipDG](https://electronicspost.com/wp-content/uploads/2016/05/4.13.png)

### IP Fragmentation

Network links have **Maximum Transmission Unit**s. This is the maximum possible
link-layer frame, defined by the medium we are using.

In this case, one datagram becomes multiple datagrams, as the data is 
fragmented at the sender(or at a router) and reassembled at the final
destination.  This is done to reduce overhead, as if we reassembled
it at intermediate devices, it might be re-fragmented later on.

We use the IP header bits used to identify and order related fragments.
For these we use the Flags and Fragmentation Offset.

Say we have 4000 bytes, and an MTU of 1500. In this case, we need to 
use 3 fragments to transfer the data over this medium.

These fragments would look like this :

![fragmets](http://images.slideplayer.com/25/7703518/slides/slide_33.jpg)

Remember, the header is 20 bytes, so the total data is 4000 - 20 = 3980 bytes
of data. We also need 20 bytes for the header of each byte.

The **offset** and **fragmentation flag** are used for telling which datagram is which.

The first fragment always has an offset of 0 and a flag of 1. 
Each subsequent fragment has a flag of 1, except for the last one, 
which is 0. The offset is telling us what is the offset of the data, that is 
where we have reached in the transfer. So the offset of the 
second datagram here is given by :

> 1480/8 = 185

Which is the position the data in the fragment continues from relative
to the whole data. 

For the third datagram, this is given by :

> (1480+1480)/8 = 370


THIS IS WHERE THE MIDTERM ENDS 

### IP Addressing 

> ICANN : Internet Corporation for Assigned Names and Numbers

These are the people who are responsible for domains and IP address
and domain registering and management. The world is distributed to 
5 geographical areas, roughly around the continents.

IP addresses are made of 4 octets. The interface is the connection
between the host/router and physical link. Routers typically 
have multiple interfaces. IP addresses are associated with each 
interface.


---
